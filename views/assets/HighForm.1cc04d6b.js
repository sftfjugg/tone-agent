import{u as C,R as v,j as e,a as i,c as u,t as F,C as w,b as x,an as y,ao as A}from"./index.d4052b74.js";import{B as h}from"./index.0e5ed0fd.js";import{F as t,I as f,R as E,C as B,S as c,T as p}from"./index.7629dd70.js";import"./index.a8ea3992.js";const P=()=>{const{config:g}=C(),{tsn:o}=g,[n]=t.useForm(),[s,D]=v.useState(void 0),b=()=>{n.validateFields(["domain"]).then(async a=>{const{ip:l}=await y(),{code:d,msg:r}=await A({...a,ip:l,tsn:o});D({code:d,msg:r})}).catch(a=>{console.log(a)})},T=()=>{if(!o)return n.setFields([{name:"testlib",errors:["TSN\u672A\u914D\u7F6E\uFF0C\u8BF7\u5207\u5230\u57FA\u7840\u914D\u7F6E\u751F\u6210TSN\u5E76\u4FDD\u5B58\u914D\u7F6E"]}]);n.validateFields(["testlib"]).then(a=>{const{testlib:l}=a;window.open(`${l}?tsn=${o}`)}).catch(a=>{console.log(a)})};return e("div",{className:"w-[572px] mx-auto",children:i(t,{form:n,colon:!1,labelCol:{span:5},requiredMark:!1,css:u`
                        .ant-input-clear-icon,
                        .ant-form-item-feedback-icon { display: inline-flex;};
                    `,children:[e(t.Item,{label:"T-One\u57DF\u540D",name:"domain",hasFeedback:!0,validateTrigger:["onBlur"],rules:[{required:!0,message:"T-One\u57DF\u540D\u57DF\u540D\u4E0D\u80FD\u4E3A\u7A7A"},{async validator(a,l,d){if(!l)return Promise.reject();const{code:r,msg:m}=await F({url:l});return r!==200?Promise.reject(m):Promise.resolve()}}],className:"!mb-3",children:e(f,{allowClear:!0,placeholder:"\u8BF7\u8F93\u5165T-One\u57DF\u540D"})}),e(t.Item,{label:"TestLib\u57DF\u540D",name:"testlib",hasFeedback:!0,className:s?"!mb-0":"!mb-3",validateTrigger:["onBlur"],rules:[{required:!0,message:"T-TestLib\u57DF\u540D\u4E0D\u80FD\u4E3A\u7A7A"},{async validator(a,l,d){if(!l)return Promise.reject();const{code:r,msg:m}=await F({url:l});return r!==200?Promise.reject(m):Promise.resolve()}}],children:e(f,{allowClear:!0,placeholder:"\u8BF7\u8F93\u5165TestLib\u57DF\u540D"})}),s&&e(E,{children:e(B,{span:18,offset:5,children:i(c,{direction:"vertical",size:0,children:[(s==null?void 0:s.code)===200&&i(c,{align:"center",css:u`height: 32px;`,children:[e(w,{css:u`display: inline-flex;svg{ fill: #52c41a;}`}),e(p.Text,{style:{color:"rgba(0,0,0,.65)"},children:"\u673A\u5668\u6CE8\u518C\u6210\u529F"})]}),(s==null?void 0:s.code)!==200&&i(c,{align:"center",css:u`height: 32px;`,children:[e(x,{css:u`display: inline-flex;svg{ fill: #ff4d4f;}`}),e(p.Text,{type:"danger",children:(s==null?void 0:s.msg)||"\u673A\u5668\u6CE8\u518C\u5931\u8D25"})]})]})})}),e(t.Item,{label:" ",children:i(c,{children:[e(h,{type:"primary",className:"w-full",onClick:b,children:"\u6CE8\u518C\u673A\u5668"}),e(h,{className:"w-full",onClick:T,children:"\u767B\u5F55TestLib"})]})})]})})};export{P as default};
