import{u as B,R as m,j as e,a as s,c as l,t as T,C as p,b as g,s as A,g as k,m as S,d as E}from"./index.d4052b74.js";import{T as N,B as f}from"./index.0e5ed0fd.js";import{F as a,I as F,Q as w,S as r,T as u}from"./index.7629dd70.js";import"./index.a8ea3992.js";const R=()=>{const[o]=a.useForm(),{config:h}=B(),[n,D]=m.useState(void 0),x=()=>{o.validateFields().then(async i=>{const{code:t,msg:d}=await A({...i,mode:"passive"});D({code:t,msg:d})})};m.useEffect(()=>{h&&o.setFieldsValue(h)},[h]);const y=async()=>{const{code:i,tsn:t,msg:d}=await k();if(i!==200)return S.error(d);o.setFieldsValue({tsn:t})},[c,C]=m.useState(void 0),b=async()=>{const{code:i,msg:t}=await E();C({code:i,msg:t})};return e("div",{className:"w-[572px] mx-auto",children:s(a,{form:o,colon:!1,labelCol:{span:5},requiredMark:!1,css:l`
                        .ant-input-clear-icon,
                        .ant-form-item-feedback-icon { display: inline-flex;};
                    `,children:[s(a.Item,{label:"\u670D\u52A1\u57DF\u540D",className:"!mb-0",children:[e(a.Item,{name:"proxy",className:"!mb-3",hasFeedback:!0,validateTrigger:["onBlur"],rules:[{required:!0,async validator(i,t,d){if(!t)return Promise.reject("\u670D\u52A1\u57DF\u540D\u4E0D\u80FD\u4E3A\u7A7A");const{code:v}=await T({url:t});return v!==200?Promise.reject():Promise.resolve()}}],children:e(F,{placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1\u57DF\u540D",allowClear:!0})}),e(N,{title:"tone-agent\u57DF\u540D\u793A\u4F8B\uFF1Ahttps://tone-agent.openanolis.cn",children:e(w,{className:" absolute -right-6 top-1 cursor-pointer"})})]}),s(a.Item,{label:"TSN",help:s(r,{direction:"vertical",size:0,children:[c&&c.code===200&&s(r,{align:"center",css:l`height: 32px;`,children:[e(p,{css:l`display: inline-flex;svg{ fill: #52c41a;}`}),e(u.Text,{style:{color:"rgba(0,0,0,.65)"},children:"\u6D4B\u8BD5\u901A\u8FC7"})]}),c&&c.code!==200&&s(r,{align:"center",css:l`height: 32px;`,children:[e(g,{css:l`display: inline-flex;svg{ fill: #ff4d4f;}`}),e(u.Text,{type:"danger",children:c.msg||"\u6D4B\u8BD5\u5931\u8D25"})]}),n&&n.code===200&&s(r,{align:"center",css:l`height: 32px;`,children:[e(p,{css:l`display: inline-flex;svg{ fill: #52c41a;}`}),e(u.Text,{style:{color:"rgba(0,0,0,.65)"},children:"\u4FDD\u5B58\u6210\u529F"})]}),n&&n.code!==200&&s(r,{align:"center",css:l`height: 32px;`,children:[e(g,{css:l`display: inline-flex;svg{ fill: #ff4d4f;}`}),e(u.Text,{type:"danger",children:n.msg||"\u4FDD\u5B58\u5931\u8D25"})]})]}),children:[e(a.Item,{name:"tsn",className:"!mb-0",rules:[{required:!0}],children:e(F,{placeholder:"\u673A\u5668\u552F\u4E00\u5E8F\u53F7",allowClear:!0})}),e(u.Link,{className:" absolute -right-16 top-1 cursor-pointer",onClick:()=>y(),children:"\u751F\u6210TSN"})]}),e(a.Item,{label:" ",children:s(r,{children:[e(f,{type:"primary",onClick:x,children:"\u4FDD\u5B58\u914D\u7F6E"}),e(f,{onClick:b,children:"\u6D4B\u8BD5\u4E00\u4E0B"})]})})]})})};export{R as default};
