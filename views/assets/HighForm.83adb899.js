import{u as v,R as f,j as e,a as i,c as t,t as h,C as E,b as w,an as A,ao as B,s as k,m as S}from"./index.8135c6cc.js";import{B as p}from"./index.a11d0ed1.js";import{F as n,I as D,R as j,C as N,S as o,T as g}from"./index.0eb0b7bf.js";import"./index.1facd006.js";const q=()=>{const{config:c,tab:b}=v(),{tsn:d}=c,[l]=n.useForm();f.useEffect(()=>{l.setFieldsValue(c)},[c,b]);const[s,y]=f.useState(void 0),x=()=>{l.validateFields(["tone_proxy"]).then(async a=>{const{ip:r}=await A(),{code:m,msg:u}=await B({...a,ip:r,tsn:d});y({code:m,msg:u})}).catch(a=>{console.log(a)})},C=()=>{if(!d)return l.setFields([{name:"testlib_proxy",errors:["TSN\u672A\u914D\u7F6E\uFF0C\u8BF7\u5207\u5230\u57FA\u7840\u914D\u7F6E\u751F\u6210TSN\u5E76\u4FDD\u5B58\u914D\u7F6E"]}]);l.validateFields(["testlib_proxy"]).then(a=>{window.open(`${a.testlib_proxy}?tsn=${d}`)}).catch(a=>{console.log(a)})},T=()=>{l.validateFields().then(async a=>{const{code:r}=await k(Object.assign(c,a));r===200&&S.success("\u914D\u7F6E\u4FDD\u5B58\u6210\u529F\uFF01")})};return e("div",{className:"w-[572px] mx-auto",children:i(n,{form:l,colon:!1,labelCol:{span:5},requiredMark:!1,css:t`
                        .ant-input-clear-icon,
                        .ant-form-item-feedback-icon { display: inline-flex;};
                    `,children:[e(n.Item,{label:"T-One\u57DF\u540D",name:"tone_proxy",hasFeedback:!0,validateTrigger:["onBlur"],rules:[{required:!0,message:"T-One\u57DF\u540D\u57DF\u540D\u4E0D\u80FD\u4E3A\u7A7A"},{async validator(a,r,m){if(!r)return Promise.reject();const{code:u,msg:F}=await h({url:r});return u!==200?Promise.reject(F):Promise.resolve()}}],className:"!mb-3",children:e(D,{allowClear:!0,placeholder:"\u8BF7\u8F93\u5165T-One\u57DF\u540D"})}),e(n.Item,{label:"TestLib\u57DF\u540D",name:"testlib_proxy",hasFeedback:!0,className:s?"!mb-0":"!mb-3",validateTrigger:["onBlur"],rules:[{required:!0,message:"TestLib\u57DF\u540D\u4E0D\u80FD\u4E3A\u7A7A"},{async validator(a,r,m){if(!r)return Promise.reject();const{code:u,msg:F}=await h({url:r});return u!==200?Promise.reject(F):Promise.resolve()}}],children:e(D,{allowClear:!0,placeholder:"\u8BF7\u8F93\u5165TestLib\u57DF\u540D"})}),s&&e(j,{children:e(N,{span:18,offset:5,children:i(o,{direction:"vertical",size:0,children:[(s==null?void 0:s.code)===200&&i(o,{align:"center",css:t`height: 32px;`,children:[e(E,{css:t`display: inline-flex;svg{ fill: #52c41a;}`}),e(g.Text,{style:{color:"rgba(0,0,0,.65)"},children:"\u673A\u5668\u6CE8\u518C\u6210\u529F"})]}),(s==null?void 0:s.code)!==200&&i(o,{align:"center",css:t`height: 32px;`,children:[e(w,{css:t`display: inline-flex;svg{ fill: #ff4d4f;}`}),e(g.Text,{type:"danger",children:(s==null?void 0:s.msg)||"\u673A\u5668\u6CE8\u518C\u5931\u8D25"})]})]})})}),e(n.Item,{label:" ",children:i(o,{children:[e(p,{type:"primary",onClick:T,children:"\u4FDD\u5B58\u914D\u7F6E"}),e(p,{type:"primary",className:"w-full",onClick:x,children:"\u6CE8\u518C\u673A\u5668"}),e(p,{className:"w-full",onClick:C,children:"\u767B\u5F55TestLib"})]})})]})})};export{q as default};
