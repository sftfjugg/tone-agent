import{u as v,R as m,j as e,a as l,c as n,t as b,C as x,b as A,s as T,g as k,m as N,d as S}from"./index.da405ea2.js";import{T as E,S as d,B as p}from"./index.cba91f47.js";import{F as t,I as F,Q as w,T as h}from"./index.b127e621.js";const P=()=>{const[u]=t.useForm(),{config:o,refreshConfig:D}=v(),[s,c]=m.useState(void 0),f=()=>{u.validateFields().then(async r=>{const{code:a,msg:i}=await T({...r});c({code:a,msg:i,type:"save"}),D()})};m.useEffect(()=>{o&&u.setFieldsValue(o)},[o]);const g=async()=>{const{code:r,tsn:a,msg:i}=await k();if(r!==200)return N.error(i);u.setFieldsValue({tsn:a})},y=async()=>{const{code:r,msg:a}=await S();c({code:r,msg:a})};return e("div",{className:"w-[572px] mx-auto",children:l(t,{form:u,colon:!1,labelCol:{span:5},requiredMark:!1,css:n`
                        .ant-input-clear-icon,
                        .ant-form-item-feedback-icon { display: inline-flex;};
                    `,children:[l(t.Item,{label:"\u670D\u52A1\u57DF\u540D",className:"!mb-0",children:[e(t.Item,{name:"proxy",className:"!mb-3",hasFeedback:!0,validateTrigger:["onBlur"],rules:[{required:!0,async validator(r,a,i){if(!a)return Promise.reject("\u670D\u52A1\u57DF\u540D\u4E0D\u80FD\u4E3A\u7A7A");const{code:B,msg:C}=await b({url:a});return B!==200?Promise.reject(C):(c(void 0),Promise.resolve())}}],children:e(F,{placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1\u57DF\u540D",allowClear:!0})}),e(E,{title:"tone-agent\u57DF\u540D\u793A\u4F8B\uFF1Ahttps://tone-agent.openanolis.cn",children:e(w,{className:" absolute -right-6 top-1 cursor-pointer"})})]}),l(t.Item,{label:"TSN",help:s&&e(d,{direction:"vertical",size:0,children:l(d,{align:"center",css:n`height: 32px;`,children:[s.code===200?e(x,{css:n`display: inline-flex;svg{ fill: #52c41a;}`}):e(A,{css:n`display: inline-flex;svg{ fill: #ff4d4f;}`}),e(h.Text,{style:s.code===200?{color:"rgba(0,0,0,.65)"}:void 0,type:s.code!==200?"danger":void 0,children:s.code===200?s.type?"\u4FDD\u5B58\u6210\u529F":"\u6D4B\u8BD5\u901A\u8FC7":s.msg?s.msg:s.type?"\u4FDD\u5B58\u5931\u8D25":"\u6D4B\u8BD5\u5931\u8D25"})]})}),children:[e(t.Item,{name:"tsn",className:"!mb-0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165TSN"}],children:e(F,{placeholder:"\u673A\u5668\u552F\u4E00\u5E8F\u53F7",allowClear:!0})}),e(h.Link,{className:" absolute -right-16 top-1 cursor-pointer",onClick:()=>g(),children:"\u751F\u6210TSN"})]}),e(t.Item,{label:" ",children:l(d,{children:[e(p,{type:"primary",onClick:f,children:"\u4FDD\u5B58\u914D\u7F6E"}),e(p,{onClick:y,children:"\u6D4B\u8BD5\u4E00\u4E0B"})]})})]})})};export{P as default};
