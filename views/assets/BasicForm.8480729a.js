import{u as T,R as m,j as e,a as s,c as l,t as A,C as p,b as g,s as k,g as S,m as E,d as N}from"./index.8135c6cc.js";import{T as w,B as f}from"./index.a11d0ed1.js";import{F as a,I as F,Q as I,S as i,T as u}from"./index.0eb0b7bf.js";import"./index.1facd006.js";const Q=()=>{const[o]=a.useForm(),{config:h,refreshConfig:D}=T(),[n,x]=m.useState(void 0),[c,C]=m.useState(void 0),y=()=>{o.validateFields().then(async r=>{const{code:t,msg:d}=await k({...r});C({code:t,msg:d}),D()})};m.useEffect(()=>{h&&o.setFieldsValue(h)},[h]);const b=async()=>{const{code:r,tsn:t,msg:d}=await S();if(r!==200)return E.error(d);o.setFieldsValue({tsn:t})},B=async()=>{const{code:r,msg:t}=await N();x({code:r,msg:t})};return e("div",{className:"w-[572px] mx-auto",children:s(a,{form:o,colon:!1,labelCol:{span:5},requiredMark:!1,css:l`
                        .ant-input-clear-icon,
                        .ant-form-item-feedback-icon { display: inline-flex;};
                    `,children:[s(a.Item,{label:"\u670D\u52A1\u57DF\u540D",className:"!mb-0",children:[e(a.Item,{name:"proxy",className:"!mb-3",hasFeedback:!0,validateTrigger:["onBlur"],rules:[{required:!0,async validator(r,t,d){if(!t)return Promise.reject("\u670D\u52A1\u57DF\u540D\u4E0D\u80FD\u4E3A\u7A7A");const{code:v}=await A({url:t});return v!==200?Promise.reject():Promise.resolve()}}],children:e(F,{placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1\u57DF\u540D",allowClear:!0})}),e(w,{title:"tone-agent\u57DF\u540D\u793A\u4F8B\uFF1Ahttps://tone-agent.openanolis.cn",children:e(I,{className:" absolute -right-6 top-1 cursor-pointer"})})]}),s(a.Item,{label:"TSN",help:s(i,{direction:"vertical",size:0,children:[n&&n.code===200&&s(i,{align:"center",css:l`height: 32px;`,children:[e(p,{css:l`display: inline-flex;svg{ fill: #52c41a;}`}),e(u.Text,{style:{color:"rgba(0,0,0,.65)"},children:"\u6D4B\u8BD5\u901A\u8FC7"})]}),n&&n.code!==200&&s(i,{align:"center",css:l`height: 32px;`,children:[e(g,{css:l`display: inline-flex;svg{ fill: #ff4d4f;}`}),e(u.Text,{type:"danger",children:n.msg||"\u6D4B\u8BD5\u5931\u8D25"})]}),c&&c.code===200&&s(i,{align:"center",css:l`height: 32px;`,children:[e(p,{css:l`display: inline-flex;svg{ fill: #52c41a;}`}),e(u.Text,{style:{color:"rgba(0,0,0,.65)"},children:"\u4FDD\u5B58\u6210\u529F"})]}),c&&c.code!==200&&s(i,{align:"center",css:l`height: 32px;`,children:[e(g,{css:l`display: inline-flex;svg{ fill: #ff4d4f;}`}),e(u.Text,{type:"danger",children:c.msg||"\u4FDD\u5B58\u5931\u8D25"})]})]}),children:[e(a.Item,{name:"tsn",className:"!mb-0",rules:[{required:!0}],children:e(F,{placeholder:"\u673A\u5668\u552F\u4E00\u5E8F\u53F7",allowClear:!0})}),e(u.Link,{className:" absolute -right-16 top-1 cursor-pointer",onClick:()=>b(),children:"\u751F\u6210TSN"})]}),e(a.Item,{label:" ",children:s(i,{children:[e(f,{type:"primary",onClick:y,children:"\u4FDD\u5B58\u914D\u7F6E"}),e(f,{onClick:B,children:"\u6D4B\u8BD5\u4E00\u4E0B"})]})})]})})};export{Q as default};
